<?xml version="1.0"?>
<e-plugin-list>
	<e-plugin
	  type="shlib"
	  id="com.scalix.evolution.plugin.core"
	  location="@PLUGINDIR@/libcom-scalix.so"
	  name="Scalix Account Setup"
	  domain="@I18N_DOMAIN@"
	  localedir="@SX_LOCALEDIR@">
  		<author name="Christian Kellner" email="Christian.Kellner@scalix.com"/>
        <author name="Carsten Guenther" email="Carsten.Guenther@scalix.com"/>
		<description>Scalix core functionality</description>
		
<!--  ********************************************************************** -->	
<!-- Menu hooks  -->

		<hook class="org.gnome.evolution.shell.bonobomenu:1.0">
			<menu id="org.gnome.evolution.shell" target="shell">
				<ui file="@PLUGINDIR@/com-scalix-menus.xml" />
				<item type="item"
					verb="ScalixMenuAbout"
					path="/commands/ScalixMenuAbout"
					activate="com_scalix_menu_about" />
			</menu>
		</hook>
		
		<hook class="org.gnome.evolution.mail.bonobomenu:1.0">
			<menu id="org.gnome.evolution.mail.browser" target="select">
				<ui file="@PLUGINDIR@/com-scalix-mail-menus.xml" />
				<item type="item"
					verb="ScalixRulesWizard"
					path="/commands/ScalixRulesWizard"
					activate="com_scalix_rules_wizard_clicked" />
				<item type="item"
					verb="ScalixChangePassword"
					path="/commands/ScalixChangePassword"
					activate="com_scalix_change_password" />

			</menu>

		</hook>
		
<!--  ********************************************************************** -->
<!-- Shell events  -->
		
		<hook class="org.gnome.evolution.shell.events:1.0">
			<event
			   id="state.changed"
			   handle="com_scalix_state"
			   target="state"
			/>
		</hook>    

<!--  ********************************************************************** -->
<!-- Account creation/setup hooks  -->

		<hook class="org.gnome.evolution.mail.config:1.0">
			<group target="account" 
			  id="org.gnome.evolution.mail.config.accountDruid"
			  check="com_scalix_aw_check"
			  abort="com_scalix_aw_abort">

				<item type="section"
                  path="10.receive/100.logo"
				  factory="com_scalix_logo_ds"/>
				
				<item type="section"
                  path="20.receive_options/100.logo"
				  factory="com_scalix_logo"/>
				
				<item type="section"
                  path="40.management/100.logo"
				  factory="com_scalix_logo_ds"/>
		  
				<item type="page"
                  path="50.synch"
				  factory="com_scalix_aw_sync"/>
				
				<item type="section"
                  path="50.synch/100.logo"
				  factory="com_scalix_logo_ds"/>

				<item type="section"
                  path="999.end/100.logo"
				  factory="com_scalix_logo"/>

			</group>	


			<group target="account" 
			  id="org.gnome.evolution.mail.config.accountWizard"
			  check="com_scalix_aw_check"
			  abort="com_scalix_aw_abort">

				<item type="section"
                  path="10.receive/100.logo"
				  factory="com_scalix_logo_ds"/>
				
				<item type="section"
                  path="20.receive_options/100.logo"
				  factory="com_scalix_logo"/>
				
				<item type="section"
                  path="40.management/100.logo"
				  factory="com_scalix_logo_ds"/>
				
		  		<item type="page"
                  path="50.synch"
				  factory="com_scalix_aw_sync"/>
				
				<item type="section"
                  path="50.synch/100.logo"
				  factory="com_scalix_logo"/>

				<item type="section"
                  path="999.end/100.logo"
				  factory="com_scalix_logo_ds"/>
		    </group>

      		<group target="account" 
			  id="org.gnome.evolution.mail.config.accountEditor"
			  commit="com_scalix_ae_commit">

				<item type="section" 
				  path="00.identity/100.logo"
				  factory="com_scalix_logo"/>
				<item type="section" 
				  path="10.receive/100.logo"
				  factory="com_scalix_logo"/>
				<item type="section" 
				  path="20.receive_options/100.logo"
				  factory="com_scalix_logo"/>
				<item type="section" 
				  path="40.defaults/100.logo"
				  factory="com_scalix_logo"/>
				<item type="section" 
				  path="40.defaults/50.srw"
				  factory="com_scalix_mc_rules"/>
				<item type="section" 
				  path="50.security/100.logo"
				  factory="com_scalix_logo"/>
			
  </group>
  
		</hook>
<!--  ********************************************************************** -->
<!-- New addressbook and calendar stuff  -->
		
		<hook class="org.gnome.evolution.addressbook.config:1.0">
            <group target="source"
	     	 id="com.novell.evolution.addressbook.config.accountEditor">
	     		    
	     	 	<item type="item"
		 		path="00.general/10.display/20.location"
		 		factory="com_scalix_addressbook_config_location"/>

            </group>
        </hook>
		
		<hook class="org.gnome.evolution.calendar.config:1.0">
            <group target="source"
	     	 id="org.gnome.evolution.calendar.calendarProperties">
		
	     	 	<item type="item_table"
		 		path="00.general/00.source/15.location"
		 		factory="com_scalix_calendar_config_location"/>
            
            </group>
        </hook>
        
	</e-plugin>
	
</e-plugin-list>
<!-- ex: set ts=4: -->
