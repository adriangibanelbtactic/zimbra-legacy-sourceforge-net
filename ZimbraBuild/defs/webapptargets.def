
# __WAR 

$(WEBAPP_DIR)/service.war: $(WEBAPP_DIR) $(SERVICE_DIR)/$(WEBAPP_BUILD_DIR)/service.war
	cp $(SERVICE_DIR)/build/dist/tomcat/webapps/service.war $@

$(SERVICE_DIR)/$(WEBAPP_BUILD_DIR)/service.war:
	(cd $(SERVICE_DIR); $(ANT) \
		-Dplat.tag=$(BUILD_PLATFORM) \
		-Dzimbra.buildinfo.version=$(VERSION_TAG) \
		-Dzimbra.buildinfo.release=$(RELEASE) -Dzimbra.buildinfo.date=$(DATE) \
		-Dzimbra.buildinfo.host=$(HOST) dev-dist ; )

$(WEBAPP_DIR)/zimbraAdmin.war: $(WEBAPP_DIR) $(CONSOLE_DIR)/$(WEBAPP_BUILD_DIR)/zimbraAdmin.war
	cp $(CONSOLE_DIR)/build/dist/tomcat/webapps/zimbraAdmin.war $@

$(CONSOLE_DIR)/$(WEBAPP_BUILD_DIR)/zimbraAdmin.war:
	(cd $(CONSOLE_DIR); $(ANT) \
		-Dplat.tag=$(BUILD_PLATFORM) \
		-Dzimbra.buildinfo.version=$(VERSION_TAG) \
		-Dzimbra.buildinfo.release=$(RELEASE) -Dzimbra.buildinfo.date=$(DATE) \
		-Dzimbra.buildinfo.host=$(HOST) clean admin-war ; )

$(WEBAPP_DIR)/zimbra.war: $(WEBAPP_DIR) $(CONSOLE_DIR)/$(WEBAPP_BUILD_DIR)/zimbra.war
	cp $(CONSOLE_DIR)/build/dist/tomcat/webapps/zimbra.war $@

$(CONSOLE_DIR)/$(WEBAPP_BUILD_DIR)/zimbra.war: 
	(cd $(CONSOLE_DIR); $(ANT) \
		-Dplat.tag=$(BUILD_PLATFORM) \
		-Dzimbra.buildinfo.version=$(VERSION_TAG) \
		-Dzimbra.buildinfo.release=$(RELEASE) -Dzimbra.buildinfo.date=$(DATE) \
		-Dzimbra.buildinfo.host=$(HOST) clean prod-war ; )
